@page
@model VNpage.Pages.Novelas.DetallesModel
@using VNpage.Models
@{
    ViewData["Title"] = "Detalles de la Novela";
}

<h2>@Model.NovelaVisual?.Titulo</h2>
<hr />

<div>
    <p><strong>Autor:</strong> @Model.NovelaVisual?.Desarrollador</p>
    <p><strong>Descripción:</strong> @Model.NovelaVisual?.Descripcion</p>
</div>

<hr />

<h3>Comentarios</h3>

@if (User.Identity?.IsAuthenticated ?? false)
{
    <form method="post">
        <textarea asp-for="NuevoComentario" class="form-control" rows="3" placeholder="Escribe tu comentario..."></textarea>
        <button type="submit" class="btn btn-primary mt-2">Enviar</button>
    </form>
}
else
{
    <p><em>Inicia sesión para dejar un comentario.</em></p>
}

<ul class="list-group mt-3">
@foreach (var comentario in Model.Comentarios)
{
    <li class="list-group-item">
        <strong>@comentario.Usuario?.DisplayName ?? comentario.Usuario?.UserName:</strong>
        <br />
        @comentario.Contenido
        <br />
        <small class="text-muted">@comentario.Fecha.ToString("g")</small>
    </li>
}
</ul>
